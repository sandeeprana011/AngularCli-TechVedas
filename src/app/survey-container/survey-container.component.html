<div class="row">
  <div class="col s2 l2 m2 cyan darken-3 fullHeight" style="width: 20%;">
    <div style="height: 20vh;" class="contalign grey lighten-4">
      <div class="centalign">
        <br><br>
        <img style="width: 15vw;height: auto;"
             src="/app/images/icon.png"/>
        <p class="cyan-text">{{q.username}}</p>
      </div>

    </div>

    <div class="col s12 l12 m12 paddingmargin0" *ngFor="let survey of q.surveysList;let ndx=index">
      <div class="sideitem" (click)="surveyItemClicked(ndx)">
        <!--<i class="tiny material-icons right">view_list</i>-->
        <p>{{survey.survey_name}} <i class="tiny material-icons right">view_list</i></p>
        <!--<div class="survey-description">{{survey.survey_description}}</div>-->
      </div>
    </div>
    <div class="col s12 l12 m12">
      <div class="padding5 sideitem" onclick="$('#modal1').openModal();">
        <p class=""><i class="material-icons right">add</i>Create New Survey</p>
        <!--<a class="btn" onclick="Materialize.toast('I am a toast', 4000)">Toast!</a>-->
        <!-- Modal Trigger -->

        <!-- Modal Structure -->

      </div>
    </div>
  </div>


  <!--###################################################################################################################-->
  <!--                                                    Right Container                                                      -->
  <!--###################################################################################################################-->


  <div class="col s10 l10 m10" style="width: 80%;">
    <div class="fullWidth" style="padding: 15px;">
      <a class="headnavitem" (click)="logout()">Logout</a>
      <a class="headnavitem" (click)="showProfile()">Profile</a>
    </div>


    <div class="fullWidth teal" style="height: 1px"></div>

    <div class="fullWidth" [hidden]="shouldHideDataRelatedToSurvey">
      <ul class="collapsible z-depth-0" data-collapsible="accordion" style="border-left: 0px;border-right: 0px;">
        <li>
          <div class="collapsible-header active cyan-text">
            <h5 class="center-align">{{heading}}<i class="material-icons medium">keyboard_arrow_down</i></h5>
          </div>
          <div class="collapsible-body">
            <p class="center-align">{{description}}</p>

            <!--This is the line containing many informations-->
            <div class="row headnavitem" [hidden]="shouldHideDataRelatedToSurvey">

              <a class="headnavitem" onclick="$('#modalPublishSurvey').openModal();"
                 type="button" name="action">
                <i class="material-icons left tiny">send</i>Publish Survey
              </a>

              <a class="headnavitem" onclick="$('#modalDeleteSurvey').openModal();"
                 type="button" name="action">Delete Survey
                <i class="material-icons left tiny">delete</i>
              </a>

              <a class="headnavitem" href="{{q.reportUrl}}" type="button"
                 name="action">Download Stats in Excel Sheet
                <i class="material-icons tiny left">vertical_align_bottom</i>
              </a>

              <a class="headnavitem" (click)="routeToReport(selectedSurvey.survey_id)" type="button"
                 name="action">View Stats
                <i class="material-icons left tiny">trending_up</i>
              </a>

              <a class="headnavitem" type="button" name="action">Finish Survey
                <i class="material-icons left tiny">done_all</i>
              </a>
            </div>

            <div class="row fullWidth" style="padding: 15px;">
              <div class="col s3 l3 m3 center-align">
                Total Questions : {{selectedSurvey.questions!=null?selectedSurvey.questions.length:0}}
              </div>
              <div class="col s3 l3 m3 center-align">
                Start Time : {{selectedSurvey.survey_starttime}}
              </div>
              <div class="col s3 l3 m3 center-align">
                End Time : {{selectedSurvey.survey_endtime}}
              </div>
              <div class="col s3 l3 m3 center-align">
                Status : {{selectedSurvey.is_published?"Published":"Not Published yet"}}
              </div>
            </div>


            <!--Tags for showing with whom this surveyor is added-->
            <div class="row paddingleft">
              <div class="col">

                <div class="chip hoverableLove" *ngFor="let surveyoro of surveyorsList;let ndx=index;">
                  <span>{{surveyoro.surveyor_email}}
                  <i class="material-icons right"
                     (click)="removeSurveyorFromSurvey(ndx,surveyoro.surveyor_email)">close</i>
                    </span>
                </div>

                <!--<div class="chip hoverableLove">-->
                <!--Sandeep Singh Rana-->
                <!--<i class="close material-icons">close</i>-->
                <!--</div>-->
                <!--<div class="chip hoverableLove">-->
                <!--Jio Lyf-->
                <!--<i class="close material-icons">close</i>-->
                <!--</div>-->
                <div class="chip chipedit">
                  <ng2-completer [(ngModel)]="searchStr" [dataService]="dataService"
                                 [minSearchLength]="0"
                                 (selected)="selectedSurveyor($event)"
                                 [placeholder]="'+ assign to'"
                                 [clearSelected]="true"
                                 [textNoResults]="'no admin fountd'"
                  >

                  </ng2-completer>
                  <!--<input type="text" placeholder="+ add  more">-->
                </div>
                <div class="chip">
                  <a class="headnavitem" (click)="inviteSurveyor()">+ Create Surveyor</a>
                </div>
              </div>
            </div>


          </div>

        </li>
      </ul>
    </div>
    <div class="fullWidth" style="padding: 20px;background-color: #eaeaea">
      <div class="z-depth-1 boardpaper padding20">
        <router-outlet></router-outlet>
        <!--<questionslist [questionsArray]="q.quest" [adminId]="q.adminId" [surveyId]="q.surveyId"></questionslist>-->
      </div>
    </div>
  </div>
</div>

<!---->
<!---->
<!---->
<!---->
<!---->
<!---->
<!---->
<!---->
<!---->
<!---->
<!---->
<!---->

<!--###########################################################################################################################-->
<!--                                                       Modal Dialogs Start from here                                       -->
<!--###########################################################################################################################-->


<!--Modal Dialog Appear on clicking the new survey for the first time we use -->
<div id="modal1" class="modal white">
  <div class="modal-content">
    <h4>Create New Survey</h4>
    <!--<p>A bunch of text</p>-->
    <div class="input-field col s12">
      <input placeholder="Survey Name" id="survey_name" type="text" class="validate"
             [ngModelOptions]="{standalone: true}" [(ngModel)]="mySurvey.survey_name">
      <label for="survey_name">Survey Name</label>
    </div>
    <div class="input-field col s12">
      <!--<textarea id="textarea1" class="materialize-textarea" length="120"></textarea>-->

      <input placeholder="Description Here" id="survey_description" type="text"
             class="materialize-textarea"
             length="500"
             [ngModelOptions]="{standalone: true}" [(ngModel)]="mySurvey.survey_description">
      <label for="survey_description">Description Here</label>
    </div>
    <div class="col s6">
      <label for="startDate">Survey Start Date</label>
      <input id="startDate" type="date" class="datepicker" [ngModelOptions]="{standalone: true}"
             [(ngModel)]="mySurvey.survey_starttime">
    </div>
    <div class="col s6">
      <label for="endDate">Survey End Date</label>
      <input id="endDate" type="date" class="datepicker" [ngModelOptions]="{standalone: true}"
             [(ngModel)]="mySurvey.survey_endtime">
    </div>

    <br>
    <br>
    <br>
  </div>
  <div class="modal-footer">
    <a class=" modal-action modal-close waves-effect waves-green btn-flat" (click)="createNewSurvey()">Create
      Survey</a>
  </div>
</div>

<div id="modalDeleteSurvey" class="modal white">
  <div class="modal-content">
    <h6>Do you really wants to delete this Survey?</h6>
  </div>
  <div class="modal-footer">
    <a class=" modal-action modal-close waves-effect waves-ripple btn-flat red white-text"
       (click)="deleteSurveyView()">Delete
      Survey</a>
  </div>
</div>

<div id="modalPublishSurvey" class="modal white rounded">
  <div class="modal-content">
    <h5>Do you really wants to publish this Survey?</h5>
    <p class="grey-text">
      Note: <b>After publish. You cann't edit Survey.</b>
    </p>
  </div>
  <div class="modal-footer">
    <a class=" modal-action modal-close waves-effect waves-ripple btn-flat green white-text"
       (click)="publishSurveyView()">Publish
      Survey</a>
  </div>
</div>

<div id="modalInformationError" class="modal white rounded">
  <div class="modal-content">
    <p id="headingInformation">Some message</p>

  </div>
  <div class="modal-footer">
    <a class=" modal-action modal-close waves-effect waves-ripple btn-flat green white-text"
    >OK</a>
  </div>
</div>

<div id="needToLoginIn" class="modal white rounded">
  <div class="modal-content">
    <div class="col s12 l12 m12">
      <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        Please Login :
      </p>
    </div>
    <div class="row">
      <form class="col s12">
        <div class="row">
          <div class="input-field col s12 m12 l12">
            <i class="material-icons prefix">perm_identity</i>
            <input id="icon_prefix" type="email" class="validate" [ngModelOptions]="{standalone: true}"
                   [(ngModel)]="q.username">
            <label for="icon_prefix">email</label>
          </div>
          <div class="input-field col s12 m12 l12">
            <i class="material-icons prefix">vpn_key</i>
            <input id="icon_telephone" type="password" class="validate" [ngModelOptions]="{standalone: true}"
                   [(ngModel)]="q.password">
            <label for="icon_telephone">password</label>
          </div>
        </div>
      </form>
    </div>

  </div>
  <div class="modal-footer">
    <a id="loginButton" (click)="loginUserView()"
       class=" modal-action waves-effect waves-ripple btn-flat green white-text"
    >OK</a>
  </div>
</div>
